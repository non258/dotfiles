!function(t){var e={};function n(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(r,s,function(e){return t[e]}.bind(null,s));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=576)}({138:function(t,e,n){!function(t){var e=/\S/,n=/\"/g,r=/\n/g,s=/\r/g,i=/\\/g,o=/\u2028/,a=/\u2029/;function l(t){"}"===t.n.substr(t.n.length-1)&&(t.n=t.n.substring(0,t.n.length-1))}function h(t){return t.trim?t.trim():t.replace(/^\s*|\s*$/g,"")}function c(t,e,n){if(e.charAt(n)!=t.charAt(0))return!1;for(var r=1,s=t.length;r<s;r++)if(e.charAt(n+r)!=t.charAt(r))return!1;return!0}t.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},t.scan=function(n,r){var s=n.length,i=0,o=null,a=null,u="",d=[],g=!1,p=0,f=0,m="{{",w="}}";function b(){u.length>0&&(d.push({tag:"_t",text:new String(u)}),u="")}function v(n,r){if(b(),n&&function(){for(var n=!0,r=f;r<d.length;r++)if(!(n=t.tags[d[r].tag]<t.tags._v||"_t"==d[r].tag&&null===d[r].text.match(e)))return!1;return n}())for(var s,i=f;i<d.length;i++)d[i].text&&((s=d[i+1])&&">"==s.tag&&(s.indent=d[i].text.toString()),d.splice(i,1));else r||d.push({tag:"\n"});g=!1,f=d.length}function y(t,e){var n="="+w,r=t.indexOf(n,e),s=h(t.substring(t.indexOf("=",e)+1,r)).split(" ");return m=s[0],w=s[s.length-1],r+n.length-1}for(r&&(r=r.split(" "),m=r[0],w=r[1]),p=0;p<s;p++)0==i?c(m,n,p)?(--p,b(),i=1):"\n"==n.charAt(p)?v(g):u+=n.charAt(p):1==i?(p+=m.length-1,"="==(o=(a=t.tags[n.charAt(p+1)])?n.charAt(p+1):"_v")?(p=y(n,p),i=0):(a&&p++,i=2),g=p):c(w,n,p)?(d.push({tag:o,n:h(u),otag:m,ctag:w,i:"/"==o?g-m.length:p+w.length}),u="",p+=w.length-1,i=0,"{"==o&&("}}"==w?p++:l(d[d.length-1]))):u+=n.charAt(p);return v(g,!0),d};var u={_t:!0,"\n":!0,$:!0,"/":!0};function d(t,e){for(var n=0,r=e.length;n<r;n++)if(e[n].o==t.n)return t.tag="#",!0}function g(t,e,n){for(var r=0,s=n.length;r<s;r++)if(n[r].c==t&&n[r].o==e)return!0}function p(t){var e=[];for(var n in t.partials)e.push('"'+m(n)+'":{name:"'+m(t.partials[n].name)+'", '+p(t.partials[n])+"}");return"partials: {"+e.join(",")+"}, subs: "+function(t){var e=[];for(var n in t)e.push('"'+m(n)+'": function(c,p,t,i) {'+t[n]+"}");return"{ "+e.join(",")+" }"}(t.subs)}t.stringify=function(e,n,r){return"{code: function (c,p,i) { "+t.wrapMain(e.code)+" },"+p(e)+"}"};var f=0;function m(t){return t.replace(i,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(s,"\\r").replace(o,"\\u2028").replace(a,"\\u2029")}function w(t){return~t.indexOf(".")?"d":"f"}function b(t,e){var n="<"+(e.prefix||"")+t.n+f++;return e.partials[n]={name:t.n,partials:{}},e.code+='t.b(t.rp("'+m(n)+'",c,p,"'+(t.indent||"")+'"));',n}function v(t,e){e.code+="t.b(t.t(t."+w(t.n)+'("'+m(t.n)+'",c,p,0)));'}function y(t){return"t.b("+t+");"}t.generate=function(e,n,r){f=0;var s={code:"",subs:{},partials:{}};return t.walk(e,s),r.asString?this.stringify(s,n,r):this.makeTemplate(s,n,r)},t.wrapMain=function(t){return'var t=this;t.b(i=i||"");'+t+"return t.fl();"},t.template=t.Template,t.makeTemplate=function(t,e,n){var r=this.makePartials(t);return r.code=new Function("c","p","i",this.wrapMain(t.code)),new this.template(r,e,this,n)},t.makePartials=function(t){var e,n={subs:{},partials:t.partials,name:t.name};for(e in n.partials)n.partials[e]=this.makePartials(n.partials[e]);for(e in t.subs)n.subs[e]=new Function("c","p","t","i",t.subs[e]);return n},t.codegen={"#":function(e,n){n.code+="if(t.s(t."+w(e.n)+'("'+m(e.n)+'",c,p,1),c,p,0,'+e.i+","+e.end+',"'+e.otag+" "+e.ctag+'")){t.rs(c,p,function(c,p,t){',t.walk(e.nodes,n),n.code+="});c.pop();}"},"^":function(e,n){n.code+="if(!t.s(t."+w(e.n)+'("'+m(e.n)+'",c,p,1),c,p,1,0,0,"")){',t.walk(e.nodes,n),n.code+="};"},">":b,"<":function(e,n){var r={partials:{},code:"",subs:{},inPartial:!0};t.walk(e.nodes,r);var s=n.partials[b(e,n)];s.subs=r.subs,s.partials=r.partials},$:function(e,n){var r={subs:{},code:"",partials:n.partials,prefix:e.n};t.walk(e.nodes,r),n.subs[e.n]=r.code,n.inPartial||(n.code+='t.sub("'+m(e.n)+'",c,p,i);')},"\n":function(t,e){e.code+=y('"\\n"'+(t.last?"":" + i"))},_v:function(t,e){e.code+="t.b(t.v(t."+w(t.n)+'("'+m(t.n)+'",c,p,0)));'},_t:function(t,e){e.code+=y('"'+m(t.text)+'"')},"{":v,"&":v},t.walk=function(e,n){for(var r,s=0,i=e.length;s<i;s++)(r=t.codegen[e[s].tag])&&r(e[s],n);return n},t.parse=function(e,n,r){return function e(n,r,s,i){var o,a=[],l=null,h=null;for(o=s[s.length-1];n.length>0;){if(h=n.shift(),o&&"<"==o.tag&&!(h.tag in u))throw new Error("Illegal content in < super tag.");if(t.tags[h.tag]<=t.tags.$||d(h,i))s.push(h),h.nodes=e(n,h.tag,s,i);else{if("/"==h.tag){if(0===s.length)throw new Error("Closing tag without opener: /"+h.n);if(l=s.pop(),h.n!=l.n&&!g(h.n,l.n,i))throw new Error("Nesting error: "+l.n+" vs. "+h.n);return l.end=h.i,a}"\n"==h.tag&&(h.last=0==n.length||"\n"==n[0].tag)}a.push(h)}if(s.length>0)throw new Error("missing closing tag: "+s.pop().n);return a}(e,0,[],(r=r||{}).sectionTags||[])},t.cache={},t.cacheKey=function(t,e){return[t,!!e.asString,!!e.disableLambda,e.delimiters,!!e.modelGet].join("||")},t.compile=function(e,n){n=n||{};var r=t.cacheKey(e,n),s=this.cache[r];if(s){var i=s.partials;for(var o in i)delete i[o].instance;return s}return s=this.generate(this.parse(this.scan(e,n.delimiters),e,n),e,n),this.cache[r]=s}}(e)},139:function(t,e,n){!function(t){function e(t,e,n){var r;return e&&"object"==typeof e&&(void 0!==e[t]?r=e[t]:n&&e.get&&"function"==typeof e.get&&(r=e.get(t))),r}t.Template=function(t,e,n,r){t=t||{},this.r=t.code||this.r,this.c=n,this.options=r||{},this.text=e||"",this.partials=t.partials||{},this.subs=t.subs||{},this.buf=""},t.Template.prototype={r:function(t,e,n){return""},v:function(t){return t=l(t),a.test(t)?t.replace(n,"&amp;").replace(r,"&lt;").replace(s,"&gt;").replace(i,"&#39;").replace(o,"&quot;"):t},t:l,render:function(t,e,n){return this.ri([t],e||{},n)},ri:function(t,e,n){return this.r(t,e,n)},ep:function(t,e){var n=this.partials[t],r=e[n.name];if(n.instance&&n.base==r)return n.instance;if("string"==typeof r){if(!this.c)throw new Error("No compiler available.");r=this.c.compile(r,this.options)}if(!r)return null;if(this.partials[t].base=r,n.subs){for(key in e.stackText||(e.stackText={}),n.subs)e.stackText[key]||(e.stackText[key]=void 0!==this.activeSub&&e.stackText[this.activeSub]?e.stackText[this.activeSub]:this.text);r=function(t,e,n,r,s,i){function o(){}function a(){}var l;o.prototype=t,a.prototype=t.subs;var h=new o;for(l in h.subs=new a,h.subsText={},h.buf="",r=r||{},h.stackSubs=r,h.subsText=i,e)r[l]||(r[l]=e[l]);for(l in r)h.subs[l]=r[l];for(l in s=s||{},h.stackPartials=s,n)s[l]||(s[l]=n[l]);for(l in s)h.partials[l]=s[l];return h}(r,n.subs,n.partials,this.stackSubs,this.stackPartials,e.stackText)}return this.partials[t].instance=r,r},rp:function(t,e,n,r){var s=this.ep(t,n);return s?s.ri(e,n,r):""},rs:function(t,e,n){var r=t[t.length-1];if(h(r))for(var s=0;s<r.length;s++)t.push(r[s]),n(t,e,this),t.pop();else n(t,e,this)},s:function(t,e,n,r,s,i,o){var a;return(!h(t)||0!==t.length)&&("function"==typeof t&&(t=this.ms(t,e,n,r,s,i,o)),a=!!t,!r&&a&&e&&e.push("object"==typeof t?t:e[e.length-1]),a)},d:function(t,n,r,s){var i,o=t.split("."),a=this.f(o[0],n,r,s),l=this.options.modelGet,c=null;if("."===t&&h(n[n.length-2]))a=n[n.length-1];else for(var u=1;u<o.length;u++)void 0!==(i=e(o[u],a,l))?(c=a,a=i):a="";return!(s&&!a)&&(s||"function"!=typeof a||(n.push(c),a=this.mv(a,n,r),n.pop()),a)},f:function(t,n,r,s){for(var i=!1,o=!1,a=this.options.modelGet,l=n.length-1;l>=0;l--)if(void 0!==(i=e(t,n[l],a))){o=!0;break}return o?(s||"function"!=typeof i||(i=this.mv(i,n,r)),i):!s&&""},ls:function(t,e,n,r,s){var i=this.options.delimiters;return this.options.delimiters=s,this.b(this.ct(l(t.call(e,r)),e,n)),this.options.delimiters=i,!1},ct:function(t,e,n){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(t,this.options).render(e,n)},b:function(t){this.buf+=t},fl:function(){var t=this.buf;return this.buf="",t},ms:function(t,e,n,r,s,i,o){var a,l=e[e.length-1],h=t.call(l);return"function"==typeof h?!!r||(a=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(h,l,n,a.substring(s,i),o)):h},mv:function(t,e,n){var r=e[e.length-1],s=t.call(r);return"function"==typeof s?this.ct(l(s.call(r)),r,n):s},sub:function(t,e,n,r){var s=this.subs[t];s&&(this.activeSub=t,s(e,n,this,r),this.activeSub=!1)}};var n=/&/g,r=/</g,s=/>/g,i=/\'/g,o=/\"/g,a=/[&<>\"\']/;function l(t){return String(null===t||void 0===t?"":t)}var h=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}}(e)},30:function(t,e,n){"use strict";let r={registerRecordsAtOnce:1e5,disableKeepingWindowStatus:!1,disableUserSettings:!1};e.a=r},36:function(t,e,n){"use strict";e.a={targetCharacters:{39:!0,45:!0,48:!0,49:!0,50:!0,51:!0,52:!0,53:!0,54:!0,55:!0,56:!0,57:!0,65:!0,66:!0,67:!0,68:!0,69:!0,70:!0,71:!0,72:!0,73:!0,74:!0,75:!0,76:!0,77:!0,78:!0,79:!0,80:!0,81:!0,82:!0,83:!0,84:!0,85:!0,86:!0,87:!0,88:!0,89:!0,90:!0,95:!0,97:!0,98:!0,99:!0,100:!0,101:!0,102:!0,103:!0,104:!0,105:!0,106:!0,107:!0,108:!0,109:!0,110:!0,111:!0,112:!0,113:!0,114:!0,115:!0,116:!0,117:!0,118:!0,119:!0,120:!0,121:!0,122:!0},quoteCharacters:{34:!0,39:!0}}},42:function(t,e,n){var r=n(138);r.Template=n(139).Template,r.template=r.Template,t.exports=r},47:function(t,e,n){"use strict";var r=n(42),s=n.n(r),i=n(9);const o={create:t=>{const e=a(t);let n;t.showTitlebar&&(n=l(t),e.appendChild(n));const r=h(t);return e.appendChild(r),{dialog:e,header:n,content:r}}};o.ContentGenerator=class{constructor(t){this.shortWordLength=t.shortWordLength,this.cutShortWordDescription=t.cutShortWordDescription,this.headFontColor=t.headFontColor,this.descFontColor=t.descFontColor,this.headFontSize=t.headFontSize,this.descFontSize=t.descFontSize,this.scroll=t.scroll,this.compiledReplaceRules=this.createReplaceRule(t.replaceRules),this.compiledContentTemplate=s.a.compile(t.contentTemplate)}createReplaceRule(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];r.search&&e.push({search:new RegExp(r.search,"g"),replace:r.replace})}return e}async generate(t){return new Promise((e,n)=>{chrome.storage.local.get(t,n=>{const r=this.createContentHtml(t,n,this.compiledContentTemplate);e(r)})})}createContentHtml(t,e,n){const r=this.createContentTemplateData(t,e);return n.render({words:r})}createDescriptionHtml(t){let e=t;for(let t=0;t<this.compiledReplaceRules.length;t++){const n=this.compiledReplaceRules[t];e=e.replace(n.search,n.replace)}return e}createContentTemplateData(t,e){const n=[];for(let r=0;r<t.length;r++){const s=t[r],i=e[s];i&&n.push({head:c(s),desc:this.createDescriptionHtml(i),isShort:s.length<=this.shortWordLength,shortDesc:i.substring(0,this.cutShortWordDescription),headFontColor:this.headFontColor,descFontColor:this.descFontColor,headFontSize:this.headFontSize,descFontSize:this.descFontSize})}for(let t=0;t<n.length;t++){const e=n[t];e.isFirst=0==t,e.isLast=t==n.length-1}return n}},e.a=o;const a=t=>{const e=s.a.compile(t.dialogTemplate).render({backgroundColor:t.backgroundColor,titlebarBackgroundColor:t.titlebarBackgroundColor,width:t.width,height:t.height,scroll:t.scroll}),n=i.a.create(e);return i.a.applyStyles(n,t.normalDialogStyles),n},l=t=>{const e=s.a.compile(t.titlebarTemplate).render({backgroundColor:t.backgroundColor,titlebarBackgroundColor:t.titlebarBackgroundColor});return i.a.create(e)},h=t=>{return i.a.create(t.contentWrapperTemplate)},c=t=>t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},576:function(t,e,n){"use strict";n.r(e);var r=n(71);const s={doesntSupportFrame:"Mouse Dictionaryは、フレームのあるページで使用することはできません。"};var i=n(9);const o=t=>{let e;return null===t||void 0===t||""===t?e=0:(e=parseInt(t,10),isNaN(e)&&(e=0)),e};var a=class{constructor(t){this.size=t,this.list=new Array(t),this.dict={},this.index=0}put(t,e){if(this.get(t))return;let n=this.list[this.index];if(n){const t=n.key;delete this.dict[t]}else n={},this.list[this.index]=n;n.key=t,n.value=e,this.dict[t]=this.index,this.index=(this.index+1)%this.size}get(t){if(!t)return null;const e=this.dict[t];return void 0===e?null:this.list[e].value}},l=n(36);const h=t=>{if(!t)return t;let e=0;for(;!(e>=t.length);){const n=t.charCodeAt(e);if(!l.a.quoteCharacters[n])break;e+=1}let n=t.length-1;for(;!(n<=0);){const e=t.charCodeAt(n);if(!l.a.quoteCharacters[e])break;n-=1}return t.substring(e,n+1)},c=(t,e,n)=>{if(!t)return null;const r=t.charCodeAt(e);if(!(32<=r&&r<=126))return null;const s=((t,e)=>{let n,r=e;for(;;){const e=t.charCodeAt(r);if(!l.a.targetCharacters[e]){n=r+1;break}if(r<=0){n=0;break}r-=1}return n})(t,e),i=((t,e,n)=>{let r,s=e+1,i=0,o=!1;for(;;){const e=t.charCodeAt(s);if(32===e){if(o||(i+=1),o=!0,i>=n){r=s;break}}else{if(!l.a.targetCharacters[e]){r=s;break}o=!1}if(s>=t.length){r=s;break}s+=1}return r})(t,e,n);return t.substring(s,i)},u=(t,e,n)=>{let r=null,s=null,i=null;if(t.caretPositionFromPoint){const o=t.caretPositionFromPoint(e,n);o&&(i={node:r=o.offsetNode,offset:s=o.offset})}else if(t.caretRangeFromPoint){const o=t.caretRangeFromPoint(e,n);o&&(i={node:r=o.startContainer,offset:s=o.startOffset})}return i};var d=n(60),g=n(30),p=n(47);const f=t=>{const e=["normalDialogStyles","movingDialogStyles","hiddenDialogStyles"];for(let n=0;n<e.length;n++){const r=e[n];t[r]&&(t[r]=JSON.parse(t[r]))}g.a.disableKeepingWindowStatus&&"keep"===t.initialPosition&&(t.initialPosition="right")},m=async()=>{const t=Object.assign({},d.a);f(t);const e=await(async()=>g.a.disableUserSettings?{}:new Promise(t=>{chrome.storage.sync.get(["**** config ****"],e=>{const n=e["**** config ****"];let r=null;r=n?JSON.parse(n):{},t(r)})}))();f(e);for(const n of Object.keys(e))t[n]=e[n];return t},w=(t,e)=>{let n,r;return{left:n=t.left<0?5:t.left+t.width>e.windowWidth?e.windowWidth-t.width-5:t.left,top:r=t.top<0?5:t.top+t.height>e.windowHeight?e.windowHeight-t.height-5:t.top,width:b(t.width,50),height:b(t.height,50)}},b=(t,e)=>Number.isFinite(t)?Math.max(t,e):null;(async()=>{const t=document.getElementsByTagName("frame");if(t&&t.length>=1)return void alert((t=>s[t]||null)("doesntSupportFrame"));const e="____MOUSE_DICTIONARY_GtUfqBap4c8u";let n=document.getElementById(e);const l=await m();if(n)return void("true"===n.getAttribute("data-mouse-dictionary-hidden")?(i.a.applyStyles(n,l.normalDialogStyles),n.setAttribute("data-mouse-dictionary-hidden","false")):(i.a.applyStyles(n,l.hiddenDialogStyles),n.setAttribute("data-mouse-dictionary-hidden","true")));let d;try{d=new p.a.ContentGenerator(l)}catch(t){d=null,console.error(t)}let f=null;const b=new a(100);let v=null,y=!1,k=!1;document.body.addEventListener("mousedown",()=>{y=!0}),document.body.addEventListener("mouseup",t=>{if(y=!1,v=window.getSelection().toString()){const t=128,e=v.trim().substring(0,t);S(e,!0)}const e=n.dialog.style,r=parseInt(e.top,10),s=parseInt(e.left,10),i=parseInt(e.width,10),o=parseInt(e.height,10);k=t.clientX>=s&&t.clientX<=s+i&&t.clientY>=r&&t.clientY<=r+o}),document.body.addEventListener("mousemove",t=>{if(y)return;if(k){if(v)return}else if(window.getSelection().toString())return;let e=((t,e,n,r=5)=>{let s=null;try{const i=u(t.ownerDocument,e,n);if(i){const{node:t,offset:e}=i;t.nodeType===Node.TEXT_NODE&&(s=c(t.data,e,r))}}catch(t){s=null}return h(s)})(t.target,t.clientX,t.clientY,l.parseWordsLimit);e&&S(e,!1)});const S=(t,e)=>{if(!e){if(!t||f===t)return;const e=b.get(t);if(e)return n.content.innerHTML="",void n.content.appendChild(e)}const s=r.a.createLookupWords(t,l.lookupWithCapitalized,e);return x(s).then(e=>{b.put(t,e),f=t})},x=t=>d.generate(t).then(t=>{const e=i.a.create(t);return n.content.innerHTML="",n.content.appendChild(e),e});(n=p.a.create(l)).dialog.id=e,i.a.applyStyles(n.dialog,l.hiddenDialogStyles),document.body.appendChild(n.dialog);const C=await(t=>new Promise(e=>{let n;switch(t.type){case"right":n=t.documentWidth-t.dialogWidth-5,e({left:`${n}px`});break;case"left":e({left:`${n=5}px`});break;case"keep":chrome.storage.sync.get(["**** last_position ****"],n=>{const r=n["**** last_position ****"],s=r?JSON.parse(r):{},i=w(s,t),o={};Number.isFinite(i.left)&&(o.left=`${i.left}px`),Number.isFinite(i.top)&&(o.top=`${i.top}px`),Number.isFinite(i.width)&&(o.width=`${i.width}px`),Number.isFinite(i.height)&&(o.height=`${i.height}px`),e(o)});break;default:e({})}}))({type:l.initialPosition,windowWidth:window.innerWidth,windowHeight:window.innerHeight,documentWidth:document.documentElement.clientWidth,documentHeight:document.documentElement.clientHeight,dialogWidth:n.dialog.clientWidth,dialogHeight:n.dialog.clientHeight});console.warn(C),i.a.applyStyles(n.dialog,C),i.a.applyStyles(n.dialog,l.normalDialogStyles);const T=new class{constructor(t,e){this.normalStyles=t,this.movingStyles=e,this.mainElement=null,this.mode=null,this.startingX=null,this.startingY=null,this.elementX=null,this.elementY=null,this.onchange=null,this.currentLeft=null,this.currentTop=null,this.currentWidth=null,this.currentHeight=null,this.lastLeft=null,this.lastTop=null,this.lastWidth=null,this.lastHeight=null,this.cursorEdgePosition=null,this.defaultCursor=null,document.body.addEventListener("mousemove",t=>{switch(null===this.currentWidth&&(this.currentWidth=o(this.mainElement.style.width)),null===this.currentHeight&&(this.currentHeight=o(this.mainElement.style.height)),this.mode){case"moving":this.move(t);break;case"resizing":this.resize(t);break;default:this.updateEdgeState(t)}}),document.body.addEventListener("mouseup",()=>{switch(this.mode){case"moving":i.a.applyStyles(this.mainElement,this.normalStyles)}this.mode=null,this.startingX=null,this.startingY=null,this.startingWidth=null,this.startingHeight=null,this.elementX=null,this.elementY=null,this.callOnChange()})}updateEdgeState(t){let e,n,r,s,i;this.onEdge(t.x-this.currentLeft)?r=!0:this.onEdge(this.currentLeft+this.currentWidth-t.x)&&(n=!0),this.onEdge(t.y-this.currentTop)?s=!0:this.onEdge(this.currentTop+this.currentHeight-t.y)&&(i=!0),r&&s?(this.cursorEdgePosition="nw",e="nwse-resize"):n&&i?(this.cursorEdgePosition="se",e="nwse-resize"):n&&s?(this.cursorEdgePosition="ne",e="nesw-resize"):r&&i?(this.cursorEdgePosition="sw",e="nesw-resize"):r?(this.cursorEdgePosition="w",e="ew-resize"):n?(this.cursorEdgePosition="e",e="ew-resize"):s?this.movePinch||(this.cursorEdgePosition="n",e="ns-resize"):i?(this.cursorEdgePosition="s",e="ns-resize"):(this.cursorEdgePosition=null,e=this.defaultCursor),e&&(this.mainElement.style.cursor=e)}onEdge(t){return t>=0&&t<=20}move(t){const e=o(t.pageX),n=o(t.pageY),r=this.elementX+e-this.startingX,s=this.elementY+n-this.startingY;r===this.currentLeft&&s===this.currentTop||(this.currentLeft=r,this.currentTop=s,this.mainElement.style.left=this.currentLeft.toString()+"px",this.mainElement.style.top=this.currentTop.toString()+"px",i.a.applyStyles(this.mainElement,this.movingStyles))}resize(t){const e=o(t.pageX),n=o(t.pageY);let r=null,s=null,i=null,a=null;switch(this.cursorEdgePosition){case"s":s=Math.max(this.startingHeight+n-this.startingY,50);break;case"e":r=Math.max(this.startingWidth+e-this.startingX,50);break;case"w":r=Math.max(this.startingWidth-e+this.startingX,50),i=this.elementX+e-this.startingX;break;case"n":s=Math.max(this.startingHeight-n+this.startingY,50),a=this.elementY+n-this.startingY;break;case"nw":s=Math.max(this.startingHeight-n+this.startingY,50),a=this.elementY+n-this.startingY,r=Math.max(this.startingWidth-e+this.startingX,50),i=this.elementX+e-this.startingX;break;case"ne":s=Math.max(this.startingHeight-n+this.startingY,50),a=this.elementY+n-this.startingY,r=this.startingWidth+e-this.startingX;break;case"se":s=Math.max(this.startingHeight+n-this.startingY,50),r=Math.max(this.startingWidth+e-this.startingX,50);break;case"sw":s=Math.max(this.startingHeight+n-this.startingY,50),r=Math.max(this.startingWidth-e+this.startingX,50),i=this.elementX+e-this.startingX;break;default:r=null,s=null}null!==r&&r!==this.currentWidth&&(this.currentWidth=r,this.mainElement.style.width=this.currentWidth.toString()+"px"),null!==s&&s!==this.currentHeight&&(this.currentHeight=s,this.mainElement.style.height=this.currentHeight.toString()+"px"),null!==i&&i!==this.currentLeft&&(this.currentLeft=i,this.mainElement.style.left=this.currentLeft.toString()+"px"),null!==a&&a!==this.currentTop&&(this.currentTop=a,this.mainElement.style.top=this.currentTop.toString()+"px")}callOnChange(){if(this.onchange&&(this.currentLeft!==this.lastLeft||this.currentTop!==this.lastTop||this.currentWidth!==this.lastWidth||this.currentHeight!==this.lastHeight)){const t={left:this.currentLeft,top:this.currentTop,width:this.currentWidth,height:this.currentHeight};this.onchange(t),this.lastLeft=this.currentLeft,this.lastTop=this.currentTop,this.lastWidth=this.currentWidth,this.lastHeight=this.currentHeight}}add(t,e){this.defaultCursor=e?"auto":"move",this.mainElement=t,this.movePinch=e,this.makeElementDraggable(t,e),this.mainElement.addEventListener("click",()=>{this.currentWidth=o(this.mainElement.style.width),this.currentHeight=o(this.mainElement.style.height)})}makeElementDraggable(t,e){e?(e.addEventListener("mousedown",e=>{this.mode="moving",this.startChanging(e,t),e.stopPropagation()}),t.addEventListener("mousedown",e=>{this.mode=this.cursorEdgePosition?"resizing":null,this.startChanging(e,t)})):(t.style.cursor=this.defaultCursor,t.addEventListener("mousedown",e=>{this.mode=this.cursorEdgePosition?"resizing":"moving",this.startChanging(e,t)})),this.currentLeft=o(t.style.left),this.currentTop=o(t.style.top)}startChanging(t,e){this.startingX=o(t.pageX),this.startingY=o(t.pageY),this.startingWidth=o(e.style.width),this.startingHeight=o(e.style.height),this.elementX=o(e.style.left),this.elementY=o(e.style.top)}}(l.normalDialogStyles,l.movingDialogStyles);g.a.disableKeepingWindowStatus||(T.onchange=(t=>{const e={};e["**** last_position ****"]=JSON.stringify(t),chrome.storage.sync.set(e,()=>{})})),l.showTitlebar?T.add(n.dialog,n.header):T.add(n.dialog)})()},60:function(t,e,n){"use strict";e.a={shortWordLength:2,cutShortWordDescription:30,parseWordsLimit:8,lookupWithCapitalized:!1,initialPosition:"right",scroll:"hidden",showTitlebar:!1,backgroundColor:"#ffffff",headFontColor:"#000088",descFontColor:"#101010",headFontSize:"small",descFontSize:"small",width:300,height:400,replaceRules:[{key:"0",search:"(◆.+)",replace:'<font color="#008000">$1</font>'},{key:"1",search:"(■.+)",replace:'<font color="#008000">$1</font>'},{key:"2",search:"(【.+?】)",replace:'<font color="#008000">$1</font>'},{key:"3",search:"({.+?})",replace:'<font color="#008000">$1</font>'},{key:"4",search:"(《.+?》)",replace:'<font color="#008000">$1</font>'},{key:"5",search:"(〈.+?〉)",replace:'<font color="#008000">$1</font>'},{key:"6",search:"(〔.+?〕)",replace:'<font color="#008000">$1</font>'},{key:"7",search:"\\n",replace:"<br/>"}],normalDialogStyles:'{\n  "opacity": 0.95,\n  "zIndex": 2147483647\n}',movingDialogStyles:'{\n  "opacity": 0.5\n}',hiddenDialogStyles:'{\n  "opacity": 0.0,\n  "zIndex": -1\n}',titlebarTemplate:'<div style="all:initial;\n            display:block;\n            font-size:small;\n            cursor:move;\n            color:#101010;\n            background-color:#EBEBEB;">Mouse Dictionary</div>',contentWrapperTemplate:'<div style="text-align:left;"></div>',dialogTemplate:'<div style="all:initial;\n            width: {{width}}px;\n            height: {{height}}px;\n            position: fixed;\n            overflow-x: hidden;\n            overflow-y: {{scroll}};\n            top: 5px;\n            background-color: {{backgroundColor}};\n            z-index: 2147483646;\n            padding: 2px 4px 2px 4px;\n            border-radius: 8px 8px 8px 8px;\n            border: 1px solid #A0A0A0;"></div>',contentTemplate:'<div style="all:initial;cursor:inherit;font-family:\'hiragino kaku gothic pro\', meiryo, sans-serif;">\n  {{#words}}\n    {{^isShort}}\n      {{! 通常の単語 }}\n      <span style="font-size:{{headFontSize}};font-weight:bold;color:{{headFontColor}}">{{head}}</span>\n      <br/>\n      <span style="font-size:{{descFontSize}};color:{{descFontColor}};">\n        {{{desc}}}\n      </span>\n    {{/isShort}}\n    {{#isShort}}\n      {{! 短い単語 }}\n      <span style="font-size:{{headFontSize}};font-weight:bold;color:{{headFontColor}}">{{head}}</span>\n      <span style="color:#505050;font-size:x-small;">{{shortDesc}}</span>\n    {{/isShort}}\n    {{^isLast}}\n      <br/><hr style="border:0;border-top:1px solid #E0E0E0;margin:0;height:1px;" />\n    {{/isLast}}\n  {{/words}}\n</div>'}},71:function(t,e,n){"use strict";var r=n(36);const s=[[{search:"pped",new:"p"},{search:"nned",new:"n"},{search:"tted",new:"t"},{search:"rred",new:"r"},{search:"ied",new:"y"}],[{search:"ed",new:""}],[{search:"ed",new:"e"}],[{search:"ies",new:"y"}],[{search:"ier",new:"y"}],[{search:"s",new:""}],[{search:"es",new:""}],[{search:"nning",new:"n"},{search:"tting",new:"t"},{search:"dding",new:"d"},{search:"gging",new:"g"},{search:"pping",new:"p"},{search:"mming",new:"m"},{search:"bbing",new:"b"},{search:"rring",new:"r"},{search:"lling",new:"l"},{search:"ing",new:""}],[{search:"ying",new:"ie"}],[{search:"ing",new:"e"}]],i={abode:"abide",alit:"alight",arcked:"arc",arisen:"arise",arose:"arise",ate:"eat",awoke:"awake",bade:"bid",beaten:"beat",became:"become",been:"be",began:"begin",begot:"beget",begotten:"beget",begun:"begin",beheld:"behold",bent:"bend",bereft:"bereave",besought:"beseech",bespoke:"bespeak",bethought:"bethink",betook:"betake",bidden:"bid",bit:"bit",bitten:"bite",bled:"bleed",blent:"blend",blest:"bless",blew:"blow",blown:"blow",bode:"bide",bore:"bear",borne:"bear",bought:"buy",bound:"bind",bred:"breed",broke:"break",broken:"break",brought:"bring",built:"build",burnt:"burn",came:"come",caught:"catch",chose:"choose",chosen:"choose",clave:"cleave",cleft:"cleave",clove:"cleave",cloven:"cleave",clung:"cling",could:"con",crept:"creep",crew:"crow",cried:"cry",dealt:"deal",did:"do",done:"do",dove:"dive",drank:"drink",drawn:"draw",dreamt:"dream",drew:"draw",dried:"dry",driven:"drive",drove:"drive",drunk:"drink",dug:"dig",durst:"dare",dwelt:"dwell",eaten:"eat",fallen:"fall",fed:"feed",fell:"fall",felt:"feel",fled:"flee",flew:"fly",flied:"fly",flown:"fly",flung:"fling",forbad:"forbid",forbade:"forbid",forbidden:"forbid",forbore:"forbear",forborne:"forbear",foregone:"forego",foretold:"foretell",forgave:"forgive",forgiven:"forgive",forgot:"forget",forgotten:"forget",forwent:"forgo",fought:"fight",found:"find",fried:"fry",froze:"freeze",frozen:"freeze",gave:"give",gilt:"gild",girt:"gird",given:"give",gone:"go",got:"get",gotten:"get",graven:"graver",grew:"grow",ground:"grind",grown:"grow",had:"have",heard:"hear",held:"hold",hewn:"hew",hid:"hide",hove:"heave",hung:"hang",inlaid:"inlay",kept:"keep",knelt:"kneel",knew:"know",known:"know",laden:"lade",laid:"lay",lain:"lie",lay:"lie",leant:"lean",leapt:"leap",learnt:"learn",left:"leave",lent:"lend",lit:"light",lost:"lose",made:"make",meant:"mean",met:"meet",methought:"methinks",might:"may",misled:"mislead",mistaken:"mistake",mistook:"mistake",misunderstood:"misunderstand",mown:"mow",outdid:"outdo",outdone:"outdo",outgone:"outgo",outgrew:"outgrow",outgrown:"outgrow",outran:"outrun",outrode:"outride",outsold:"outsell",outwent:"outgo",overate:"ocereat",overbore:"overbear",overborne:"overbear",overcame:"overcome",overdone:"overdo",overdrew:"overdraw",overhung:"overhang",overran:"overrun",overshot:"overshoot",overtaken:"overtake",overtook:"overtake",paid:"pay",partaken:"partake",partook:"partake",pent:"pen",pled:"plead",prepaid:"prepay",proven:"prove",ran:"run",rang:"ring",read:"read",remade:"remake",rent:"rent",ridden:"ride",risen:"rise",rode:"ride",rose:"rise",rove:"reeve",rung:"ring",sang:"sing",sank:"sink",sat:"sit",saw:"see",sawn:"saw",seen:"see",sent:"send",sewn:"sew",shaken:"shake",shaven:"shave",shod:"shoe",shone:"shine",shook:"shake",shorn:"shear",shot:"shoot",should:"shall",shown:"show",shrank:"shrink",shriven:"shrive",shrove:"shrive",shrunk:"shrink",shrunken:"shrink",slain:"slay",slept:"sleep",slew:"slay",slid:"slide",slung:"sling",slunk:"slink",smelt:"smell",smitten:"smite",smote:"smite",snuck:"sneak",sold:"sell",sought:"seek",sown:"sow",spake:"speak",spat:"spit",sped:"speed",spelt:"spell",spent:"spend",spilt:"spill",spoilt:"spoil",spoke:"speak",spoken:"speak",sprang:"spring",sprung:"spring",spun:"spin",stank:"stink",stole:"steal",stolen:"steal",stood:"stand",stove:"stave",stricken:"strike",stridden:"stride",striven:"strive",strode:"stride",strove:"strive",struck:"strike",strung:"string",stuck:"stick",stung:"sting",stunk:"stink",sung:"sing",sunk:"sink",sunken:"sink",swam:"swim",swept:"sweep",swollen:"swell",swore:"swear",sworn:"swear",swum:"swim",swung:"swing",taken:"take",taught:"teach",thought:"think",threw:"throw",throve:"thrive",thrown:"throw",told:"tell",took:"take",tore:"tear",torn:"tear",tried:"try",trod:"tread",trodden:"tread",unbent:"unbend",unbound:"unbind",unclad:"unclothe",undergone:"undergo",undershot:"undershoot",understood:"understand",undertook:"undertake",underwent:"undergo",undone:"undo",unsaid:"unsay",unstrung:"unstring",unwound:"unwind",upheld:"uphold",wend:"go",went:"go",wept:"weep",whipt:"whip",wist:"wit",withdrawn:"withdraw",withdrew:"withdraw",woke:"wake",woken:"wake",won:"win",wore:"wear",worn:"wear",would:"will",wound:"wind",wove:"weave",woven:"weave",wrapt:"wrap",writ:"write",written:"write",wrote:"write",wrought:"work",wrung:"wring"};var o=class{constructor(){this.array=[],this.set=new Set}push(t){this.set.has(t)||(this.array.push(t),this.set.add(t))}merge(t){for(let e=0;e<t.length;e++)this.push(t[e])}toArray(){return this.array}};const a={createLookupWords:(t,e=!1,n=!1)=>{const r=t.toLowerCase(),s=r===t,i=s?[t]:[t,r],c=new o;n&&c.push(t);for(let t=0;t<i.length;t++){const e=a.splitIntoWords(i[t]),n=l(e,!s);c.merge(n);const r=h(e);for(let t=0;t<r.length;t++){const e=r[t];if(e){const t=l(e,!s);c.merge(t)}}}return e&&c.merge(c.toArray().map(t=>t.toUpperCase())),c.toArray()}},l=(t,e)=>{const n=a.linkWords(t),r=a.parseFirstWord(t[0],e);for(let t=0;t<r.length;t++){const e=r[t];n.push(e)}const s=[];for(let t=0;t<n.length;t++){const e=a.tryToReplaceTrailingStrings(n[t],d);s.push(...e)}return n.push(...s),n},h=t=>{let e=[],n=!1;for(let r=0;r<u.length;r++){const s=Object.assign([],t);for(let t=0;t<s.length;t++){const e=c(s[t],u[r]);e&&(s[t]=e,n=!0)}n&&e.push(s)}return e},c=(t,e)=>{let n=null;const r=e[t];return r?n=r:(t.endsWith("'s")||t.endsWith("s'"))&&(n=e["'s"]),n},u=[{my:"one's",your:"one's",his:"one's",her:"one's",its:"one's",our:"one's",their:"one's","'s":"one's","one's":"one's","someone's":"someone's",myself:"oneself",yourself:"oneself",himself:"oneself",herself:"oneself",ourselves:"oneself",themselves:"oneself"},{my:"someone's",your:"someone's",his:"someone's",her:"someone's",its:"someone's",our:"someone's",their:"someone's","'s":"someone's","one's":"one's","someone's":"someone's",myself:"oneself",yourself:"oneself",himself:"oneself",herself:"oneself",ourselves:"oneself",themselves:"oneself"}];a.splitIntoWords=(t=>{const e=[];let n=null,s=0;for(;;){const i=t.charCodeAt(s);if(r.a.targetCharacters[i])null===n&&(n=s);else if(null!==n){const r=t.substring(n,s);e.push(r),n=null}if((s+=1)>=t.length){if(null!==n){const r=t.substring(n);e.push(r)}break}}return e}),a.splitString=(t=>{const e=[];let n=0,r=0,s=!0;for(;!(r>=t.length);){const i=t.charCodeAt(r),o=i>=65&&i<=90;let a=null;if(35===i||45===i||46===i||95===i?(a=t.substring(n,r),n=r+1):o&&!s?(a=t.substring(n,r),n=r):s=o,a){e.push(a);const t=a.toLowerCase();t!==a&&e.push(t)}r+=1}if(n>0){const r=t.substring(n);e.push(r);const s=r.toLowerCase();s!==r&&e.push(s)}return e});const d=[[{search:"'s",new:""},{search:"s",new:""}],[{search:"er",new:""}],[{search:"iest",new:"y"}],[{search:"est",new:""}]];a.parseFirstWord=((t,e)=>{if(!t)return[];const n=new o,r=t.toLowerCase(),s=e||r===t?[t]:[t,r];for(let t=0;t<s.length;t++){const e=s[t];t>=1&&n.push(e),n.merge(a.tryToReplaceTrailingStrings(e,d));const r=a.splitString(e);r.length>=2&&n.push(r.join(" "));for(let t=0;t<r.length;t++){const e=r[t];n.push(e)}}return n.toArray()}),a.replaceTrailingCharacters=((t,e,n)=>{let r=null;return t.endsWith(e)&&(r=t.substring(t,t.length-e.length)+n),r}),a.tryToReplaceTrailingStrings=((t,e)=>{let n=[];for(let r=0;r<e.length;r++){const s=e[r];for(let e=0;e<s.length;e++){const r=s[e];let i=a.replaceTrailingCharacters(t,r.search,r.new);if(i){n.push(i);break}}}return n}),a.linkWords=(t=>{let e=[];if(0===t.length)return e;const n=t[0],r=[n].concat((t=>{const e=[],n=i[t];n&&e.push(n);const r=g.tryToReplaceTrailingStrings(t,s);return e.push(...r),e})(n));for(let n=0;n<r.length;n++){const s=[].concat(t);let i;s[0]=r[n];const o=new Array(s.length);for(let t=0;t<s.length;t++){let e=s[t];0===t?i=e:i+=" "+e,o[s.length-t-1]=i}e.push(...o)}return e});var g=e.a=a},9:function(t,e,n){"use strict";const r={create:t=>{var e=document.createElement("template");return e.innerHTML=t.trim(),e.content.firstChild},applyStyles:(t,e)=>{if(e)for(let n of Object.keys(e))t.style[n]=e[n]}};e.a=r}});